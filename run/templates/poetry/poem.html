{% extends "base.html" %}

{% block head %}
{{ super() }}
<style>
    .match {color: black;}
    .mismatch {color: red;}
    .stressed {font-weight: bold;}
    .unstressed {}
    .missing {font-size: 80%;}
</style>
{% endblock %}


{% block title %}
{{ title }} - Metroscope
{% endblock title %}

{% block page_content %}
<h1>{{ title }}</h1>
<p>- by {{ poet }}, scanned in {{ meter }}.</p>
<div class='container'>
    <table>
        <thead>
            <tr>
                <th scope="col" style="text-align:center">Verse</th>
                <th scope="col"> </th>
                <th scope="col" style="text-align:center">Rhyme</th>
            </tr>
        </thead>
        <tbody>
        {% for stanza in stanzas %}
            {% for line in stanza %}
            <tr style="border-top:hidden">
                <td class="text-center text-muted">
                    <small>{{ line.count }}</small>
                </td>
                <td>
                {% for word in line._matched_words() %}
                    {% for syllable in word._matched_syllables() %}<span class='{% if syllable.match %}match{% else %}mismatch{% endif %} {% if syllable.stress is none %}missing{% elif syllable.stress %}stressed{% else %}unstressed{% endif %}'>{{syllable.text}}</span>{% endfor %}
                {% endfor %}
                </td>
                <td class="text-center text-muted">
                    <small data-toggle='tooltip' title='{{ line._rhyming_part }}'>{{ line.rhyme_designator }}</small>
                </td>
            </tr>
            {% endfor %}
            <tr>
                <td><br></td>
                <td><br></td>
                <td><br></td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
</div>
{% endblock page_content %}

{% block scripts %}
{{super()}}
<script>
    $(document).ready(function(){
      $("[data-toggle='tooltip']").tooltip();
    });
</script>
{% endblock scripts %}
